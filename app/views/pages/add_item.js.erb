$('body').css('overflow', 'hidden');
$("<%= escape_javascript(render 'pages/add_item') %>").appendTo(".container");

$('#item_name').focus();

function closeDialog(event) {
  event.preventDefault();
  $('.overlay').remove();
  $('body').css('overflow', 'initial');
  $(window).off('keyup', closeDialogOnEscape);
}

function closeDialogOnEscape (ev) {
  if (ev.which === 27) {
    closeDialog(ev);
  }
}

$('.close').on('click', closeDialog);
$(window).on('keyup', closeDialogOnEscape);

$('#search-items').on('submit', function (e) {
  const loadingLayer = $('<div/>', {
    id: 'loading-layer',
    append: $('<div/>', {
      class: 'fa fa-spinner fa-pulse fa-3x fa-fw'
    })
  }).appendTo($('body'));
});
